<mat-toolbar color="primary" class="header-toolbar">
  <div class="header-content">
    <!-- Consumption Indicator -->
    @if (consumptionMode()) {
    <div class="consumption-indicator">
      <button mat-button routerLink="/home" class="mode-button">
        <mat-icon>edit</mat-icon>
        {{ consumptionLabel() }}
      </button>
    </div>
    }
    <!-- Spacer -->
    <span class="spacer"></span>

    <!-- Logo centré -->
    <a routerLink="/" class="logo-container">
      <img src="/assets/img/logo.png" alt="Sushi shop Logo" class="logo-image" />
    </a>

    <!-- Spacer -->
    <span class="spacer"></span>

    <!-- Panier -->
    <div class="cart-icon-wrapper">
      <button mat-icon-button matTooltip="Panier" [matMenuTriggerFor]="cartMenu">
        <mat-icon
          matBadge="{{ cartService.cartCount() || 0 }}"
          matBadgeColor="warn"
          matBadgeSize="small"
        >
          shopping_cart
        </mat-icon>
      </button>
      <mat-menu #cartMenu="matMenu" class="cart-menu">
        <div mat-menu-item class="cart-menu-container">
          <app-cart displayMode="header"></app-cart>
        </div>
      </mat-menu>
    </div>

    @if (isAuthenticated()) {
    <div class="user-section">
      <span class="user-name">{{ currentUser()?.prenom_user }} {{ currentUser()?.nom_user }}</span>
      <button mat-icon-button [matMenuTriggerFor]="menu">
        <mat-icon>account_circle</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="logout()">
          <mat-icon>logout</mat-icon>
          <span>Déconnexion</span>
        </button>
      </mat-menu>
    </div>
    } @if (!isAuthenticated() && !isLoginPage()) {
    <div class="auth-section">
      <button mat-button [matMenuTriggerFor]="loginMenu">Connexion</button>
      <a routerLink="/login/create-account" mat-raised-button color="accent">Inscription</a>
      <mat-menu #loginMenu="matMenu">
        <div mat-menu-item class="login-menu-container">
          <app-login-form></app-login-form>
        </div>
      </mat-menu>
    </div>
    }
  </div>
</mat-toolbar>
